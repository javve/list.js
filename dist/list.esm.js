var t,e,r=(t=(t,e)=>{var r=require("string-natural-compare"),i=require("./utils/get-by-class"),s=require("./utils/extend"),a=require("./utils/index-of"),n=require("./utils/events"),l=require("./utils/to-string"),o=require("./utils/classes"),u=require("./utils/get-attribute"),h=require("./utils/to-array"),m=require("./templater"),c=require("./item"),p=require("./sort"),f=require("./sort-buttons"),d=f.addSortListeners,g=f.clearSortOrder,v=f.setSortOrder;e.exports=function(t,e,f){var q,b=this,C=require("./add-async")(b),I=require("./pagination")(b);q={start:function(){b.listClass="list",b.searchClass="search",b.sortClass="sort",b.page=1e4,b.i=1,b.items=[],b.visibleItems=[],b.matchingItems=[],b.searched=!1,b.filtered=!1,b.searchColumns=void 0,b.searchDelay=0,b.handlers={updated:[]},b.valueNames=[],b.utils={getByClass:i,extend:s,indexOf:a,events:n,toString:l,naturalSort:r,classes:o,getAttribute:u,toArray:h},b.utils.extend(b,e),b.listContainer="string"==typeof t?document.getElementById(t):t,b.listContainer&&(b.list=i(b.listContainer,b.listClass,!0),b.parse=require("./parse")(b),b.templater=m,b.template=b.templater.getTemplate({parentEl:b.list,valueNames:b.valueNames,template:b.item}),b.search=require("./search")(b),b.filter=require("./filter")(b),b.fuzzySearch=require("./fuzzy-search")(b,e.fuzzySearch),this.handlers(),this.items(),this.pagination(),this.sort(),b.update())},handlers:function(){for(var t in b.handlers)b[t]&&b.handlers[t]&&b.on(t,b[t])},items:function(){b.parse(b.list),void 0!==f&&b.add(f)},pagination:function(){if(void 0!==e.pagination){!0===e.pagination&&(e.pagination=[{}]),void 0===e.pagination[0]&&(e.pagination=[e.pagination]);for(var t=0,r=e.pagination.length;t<r;t++)I(e.pagination[t])}},sort:function(){var t=b.utils.getByClass(b.listContainer,b.sortClass),e=b.items,r=b.sortFunction,i=b.alphabet,s=function(){b.trigger("sortStart")},a=function(){b.update(),b.trigger("sortComplete")};d(t,{items:e,sortFunction:r,alphabet:i,before:s,after:a}),b.handlers.sortStart=b.handlers.sortStart||[],b.handlers.sortComplete=b.handlers.sortComplete||[],b.on("searchStart",(function(){g(t)})),b.on("filterStart",(function(){g(t)})),b.sort=function(r,i){return i=i||{},s(),v(t,r,i.order),i.alphabet=i.alphabet||b.alphabet,i.sortFunction=i.sortFunction||b.sortFunction,i.valueName=r,p(e,r,i),a(),e}}},this.reIndex=function(){b.items=[],b.visibleItems=[],b.matchingItems=[],b.searched=!1,b.filtered=!1,b.parse(b.list)},this.toJSON=function(){for(var t=[],e=0,r=b.items.length;e<r;e++)t.push(b.items[e].values());return t},this.add=function(t,e){if(0!==t.length){if(e)return void C(t.slice(0),e);var r=[];void 0===t[0]&&(t=[t]);for(var i=0,s=t.length;i<s;i++){var a=new c(t[i],{template:b.template});b.items.push(a),r.push(a)}return b.update(),r}},this.show=function(t,e){return this.i=t,this.page=e,b.update(),b},this.remove=function(t,e){for(var r=0,i=0,s=b.items.length;i<s;i++)b.items[i].values()[t]==e&&(b.templater.remove(b.items[i].elm,b.list),b.items.splice(i,1),s--,i--,r++);return b.update(),r},this.get=function(t,e){for(var r=[],i=0,s=b.items.length;i<s;i++){var a=b.items[i];a.values()[t]==e&&r.push(a)}return r},this.size=function(){return b.items.length},this.clear=function(){return b.templater.clear(b.list),b.items=[],b},this.on=function(t,e){return b.handlers[t].push(e),b},this.off=function(t,e){var r=b.handlers[t],i=a(r,e);return i>-1&&r.splice(i,1),b},this.trigger=function(t){for(var e=b.handlers[t].length;e--;)b.handlers[t][e](b);return b},this.reset={filter:function(){for(var t=b.items,e=t.length;e--;)t[e].filtered=!1;return b},search:function(){for(var t=b.items,e=t.length;e--;)t[e].found=!1;return b}},this.update=function(){var t=b.items,e=t.length;b.visibleItems=[],b.matchingItems=[],b.templater.clear(b.list);for(var r=0;r<e;r++)t[r].matching(b)&&b.matchingItems.length+1>=b.i&&b.visibleItems.length<b.page?(t[r].elm||(t[r].elm=m.create(t[r].values(),b.template)),m.show(t[r].elm,b.list),b.visibleItems.push(t[r]),b.matchingItems.push(t[r])):(t[r].matching(b)&&b.matchingItems.push(t[r]),m.remove(t[r].elm,b.list));return b.trigger("updated"),b},q.start()}},()=>(e||t((e={exports:{}}).exports,e),e.exports));export default r();
//# sourceMappingURL=list.esm.js.map
