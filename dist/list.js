!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t=require("string-natural-compare"),e=require("./utils/get-by-class"),r=require("./utils/extend"),i=require("./utils/index-of"),s=require("./utils/events"),n=require("./utils/to-string"),a=require("./utils/classes"),l=require("./utils/get-attribute"),o=require("./utils/to-array"),u=require("./templater"),h=require("./item"),m=require("./sort"),c=require("./sort-buttons"),f=c.addSortListeners,p=c.clearSortOrder,d=c.setSortOrder;module.exports=function(c,g,v){var q,b=this,C=require("./add-async")(b),y=require("./pagination")(b);q={start:function(){b.listClass="list",b.searchClass="search",b.sortClass="sort",b.page=1e4,b.i=1,b.items=[],b.visibleItems=[],b.matchingItems=[],b.searched=!1,b.filtered=!1,b.searchColumns=void 0,b.searchDelay=0,b.handlers={updated:[]},b.valueNames=[],b.utils={getByClass:e,extend:r,indexOf:i,events:s,toString:n,naturalSort:t,classes:a,getAttribute:l,toArray:o},b.utils.extend(b,g),b.listContainer="string"==typeof c?document.getElementById(c):c,b.listContainer&&(b.list=e(b.listContainer,b.listClass,!0),b.parse=require("./parse")(b),b.templater=u,b.template=b.templater.getTemplate({parentEl:b.list,valueNames:b.valueNames,template:b.item}),b.search=require("./search")(b),b.filter=require("./filter")(b),b.fuzzySearch=require("./fuzzy-search")(b,g.fuzzySearch),this.handlers(),this.items(),this.pagination(),this.sort(),b.update())},handlers:function(){for(var t in b.handlers)b[t]&&b.handlers[t]&&b.on(t,b[t])},items:function(){b.parse(b.list),void 0!==v&&b.add(v)},pagination:function(){if(void 0!==g.pagination){!0===g.pagination&&(g.pagination=[{}]),void 0===g.pagination[0]&&(g.pagination=[g.pagination]);for(var t=0,e=g.pagination.length;t<e;t++)y(g.pagination[t])}},sort:function(){var t=b.utils.getByClass(b.listContainer,b.sortClass),e=b.items,r=b.sortFunction,i=b.alphabet,s=function(){b.trigger("sortStart")},n=function(){b.update(),b.trigger("sortComplete")};f(t,{items:e,sortFunction:r,alphabet:i,before:s,after:n}),b.handlers.sortStart=b.handlers.sortStart||[],b.handlers.sortComplete=b.handlers.sortComplete||[],b.on("searchStart",(function(){p(t)})),b.on("filterStart",(function(){p(t)})),b.sort=function(r,i){return i=i||{},s(),d(t,r,i.order),i.alphabet=i.alphabet||b.alphabet,i.sortFunction=i.sortFunction||b.sortFunction,i.valueName=r,m(e,r,i),n(),e}}},this.reIndex=function(){b.items=[],b.visibleItems=[],b.matchingItems=[],b.searched=!1,b.filtered=!1,b.parse(b.list)},this.toJSON=function(){for(var t=[],e=0,r=b.items.length;e<r;e++)t.push(b.items[e].values());return t},this.add=function(t,e){if(0!==t.length){if(e)return void C(t.slice(0),e);var r=[];void 0===t[0]&&(t=[t]);for(var i=0,s=t.length;i<s;i++){var n=new h(t[i],{template:b.template});b.items.push(n),r.push(n)}return b.update(),r}},this.show=function(t,e){return this.i=t,this.page=e,b.update(),b},this.remove=function(t,e){for(var r=0,i=0,s=b.items.length;i<s;i++)b.items[i].values()[t]==e&&(b.templater.remove(b.items[i].elm,b.list),b.items.splice(i,1),s--,i--,r++);return b.update(),r},this.get=function(t,e){for(var r=[],i=0,s=b.items.length;i<s;i++){var n=b.items[i];n.values()[t]==e&&r.push(n)}return r},this.size=function(){return b.items.length},this.clear=function(){return b.templater.clear(b.list),b.items=[],b},this.on=function(t,e){return b.handlers[t].push(e),b},this.off=function(t,e){var r=b.handlers[t],s=i(r,e);return s>-1&&r.splice(s,1),b},this.trigger=function(t){for(var e=b.handlers[t].length;e--;)b.handlers[t][e](b);return b},this.reset={filter:function(){for(var t=b.items,e=t.length;e--;)t[e].filtered=!1;return b},search:function(){for(var t=b.items,e=t.length;e--;)t[e].found=!1;return b}},this.update=function(){var t=b.items,e=t.length;b.visibleItems=[],b.matchingItems=[],b.templater.clear(b.list);for(var r=0;r<e;r++)t[r].matching(b)&&b.matchingItems.length+1>=b.i&&b.visibleItems.length<b.page?(t[r].elm||(t[r].elm=u.create(t[r].values(),b.template)),u.show(t[r].elm,b.list),b.visibleItems.push(t[r]),b.matchingItems.push(t[r])):(t[r].matching(b)&&b.matchingItems.push(t[r]),u.remove(t[r].elm,b.list));return b.trigger("updated"),b},q.start()}}));
//# sourceMappingURL=list.js.map
